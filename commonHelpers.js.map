{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector(\".search-form\");\nconst url = new URL(\"https://pixabay.com/api/\")\n\n\nconst galleryContainer = document.querySelector(\".gallery\");\n\nconst loader = document.querySelector(\".loader\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n\nsearchForm.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  const query = event.currentTarget.elements.query.value.trim()\n  \n  const params = {\n    key: '41612762-752dc9341b43071862b7b3b8c',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n};\n\nurl.search = new URLSearchParams(params);\n  \n  galleryContainer.innerHTML = ''; // очищення при кожному натисканні\n\n  loader.style.display = \"block\";\n\n    fetch(url)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(\"Network response was not ok\");\n      }\n      return res.json()\n    })\n    .then(imgs => {\n      if (imgs.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          position: 'center',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        galleryContainer.innerHTML = renderImagesHtmlReduce(imgs.hits)\n  \n    lightbox.refresh(); \n  }\n    })\n      .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        position: 'center',\n        message: 'Sorry, there are no images matching your search query. Please try again later!',\n      });\n    })\n\n      .finally(() => {\n      loader.style.display = \"none\";\n    });\n\n});\n\nfunction renderImagesHtmlReduce(galleryContainer) {\n  return galleryContainer.reduce(\n    (acc, img) =>\n      acc +\n      `<li class=\"img-gallery-item\"><a class=\"gallery-link\" href=\"${img.largeImageURL}\"><img class=\"gallery-image\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" width=\"${img.webformatWidth}\"></a>\n        <div class=\"info-img\">\n          <p>Likes<span>${img.likes}</span></p>\n          <p>Views<span>${img.views}</span></p>\n          <p>Comments<span>${img.comments}</span></p>\n          <p>Downloads<span>${img.downloads}</span></p>\n        </div>\n      </li>`,\n    ''\n  );\n}"],"names":["searchForm","url","galleryContainer","loader","lightbox","SimpleLightbox","event","params","res","imgs","iziToast","renderImagesHtmlReduce","error","acc","img"],"mappings":"wvBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAM,IAAI,IAAI,0BAA0B,EAGxCC,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,aAAc,CAChD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACZ,CAAC,EAEDL,EAAW,iBAAiB,SAAWM,GAAU,CAC/CA,EAAM,eAAc,EAIpB,MAAMC,EAAS,CACb,IAAK,qCACL,EAJYD,EAAM,cAAc,SAAS,MAAM,MAAM,KAAM,EAK3D,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEAL,EAAI,OAAS,IAAI,gBAAgBM,CAAM,EAErCL,EAAiB,UAAY,GAE7BC,EAAO,MAAM,QAAU,QAErB,MAAMF,CAAG,EACR,KAAKO,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,6BAA6B,EAE/C,OAAOA,EAAI,KAAM,CACvB,CAAK,EACA,KAAKC,GAAQ,CACRA,EAAK,KAAK,SAAW,EACvBC,EAAS,MAAM,CACb,MAAO,QACP,SAAU,SACV,QAAS,0EACnB,CAAS,GAEDR,EAAiB,UAAYS,EAAuBF,EAAK,IAAI,EAEjEL,EAAS,QAAO,EAEpB,CAAK,EACE,MAAMQ,GAAS,CAChBF,EAAS,MAAM,CACb,MAAO,QACP,SAAU,SACV,QAAS,gFACjB,CAAO,CACP,CAAK,EAEE,QAAQ,IAAM,CACfP,EAAO,MAAM,QAAU,MAC7B,CAAK,CAEL,CAAC,EAED,SAASQ,EAAuBT,EAAkB,CAChD,OAAOA,EAAiB,OACtB,CAACW,EAAKC,IACJD,EACA,8DAA8DC,EAAI,kDAAkDA,EAAI,sBAAsBA,EAAI,gBAAgBA,EAAI;AAAA;AAAA,0BAElJA,EAAI;AAAA,0BACJA,EAAI;AAAA,6BACDA,EAAI;AAAA,8BACHA,EAAI;AAAA;AAAA,aAG9B,EACJ,CACA"}